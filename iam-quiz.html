<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IAM Questions Quiz</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 700px; margin: 2rem auto; padding: 1rem; }
    .question-container { border: 1px solid #ddd; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; }
    .options { margin-top: 0.5rem; list-style-type: none; padding: 0; }
    .options li {
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-bottom: 0.5rem;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }
    .options li.correct {
      background-color: #d4edda;
      border-color: #28a745;
      color: #155724;
      font-weight: bold;
    }
    .options li.incorrect {
      background-color: #f8d7da;
      border-color: #dc3545;
      color: #721c24;
      font-weight: bold;
    }
    .options li.disabled {
      cursor: default;
      opacity: 0.7;
    }
    button {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      cursor: pointer;
      border: none;
      border-radius: 4px;
      background-color: #007bff;
      color: white;
    }
    button:disabled {
      background-color: #6c757d;
      cursor: not-allowed;
    }
    .explanation {
      background: #f9f9f9;
      border: 1px solid #ccc;
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 6px;
      font-style: italic;
    }
    .nav-buttons {
      margin-top: 2rem;
      text-align: center;
    }
    .nav-buttons button {
      margin: 0 10px;
      min-width: 120px;
    }
    .scoreboard {
      text-align: center;
      font-size: 1.4rem;
      font-weight: bold;
      margin-top: 3rem;
      padding: 2rem;
      border: 2px solid #007bff;
      border-radius: 12px;
      background-color: #e9f5ff;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
      box-shadow: 0 0 15px rgba(0,123,255,0.3);
    }
    .icon {
      font-weight: bold;
      margin-left: 10px;
      font-size: 1.2em;
      vertical-align: middle;
    }
    .icon.correct {
      color: #28a745;
    }
    .icon.incorrect {
      color: #dc3545;
    }
  </style>
</head>
<body>

  <div id="question-page" class="question-container">
    <!-- Question content will be injected here -->
  </div>

  <div class="nav-buttons">
    <button id="prev-btn" disabled>Previous Question</button>
    <button id="next-btn" disabled>Next Question</button>
  </div>

  <div id="scoreboard" class="scoreboard" style="display:none;">
    <!-- Final score display -->
  </div>

  <!-- jQuery CDN -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script>
    $(function() {
      const questions = [
        {
          "Q_No": "1",
          "Question": "What is a proper definition of an IAM Role?",
          "A": "IAM Users in multiple User Groups",
          "B": "An IAM entity that defines a set of permissions for making requests to AWS services, and will be used by an AWS service",
          "C": "An IAM entity that defines a password policy for IAM Users",
          "D": "Permissions assigned to IAM Users to perform actions",
          "E": "",
          "Answer": "B",
          "Explanation": "Some AWS services need to perform actions on your behalf. To do so, you assign permissions to AWS services with IAM Roles."
        },
        {
          "Q_No": "2",
          "Question": "Which of the following is an IAM Security Tool?",
          "A": "IAM Credentials Report",
          "B": "IAM Root Account Manager",
          "C": "IAM Services Report",
          "D": "IAM Security Advisor",
          "E": "",
          "Answer": "A",
          "Explanation": "IAM Credentials report lists all your AWS Account's IAM Users and the status of their various credentials."
        },
        {
          "Q_No": "3",
          "Question": "Which answer is INCORRECT regarding IAM Users?",
          "A": "IAM Users can belong to multiple User Groups",
          "B": "IAM Users don't have to belong to a User Group",
          "C": "IAM Policies can be attached directly to IAM Users",
          "D": "IAM Users access AWS services using root account credentials",
          "E": "",
          "Answer": "D",
          "Explanation": "IAM Users access AWS services using their own credentials (username & password or Access Keys)."
        },
        {
          "Q_No": "4",
          "Question": "Which of the following is an IAM best practice?",
          "A": "Create several IAM Users for one physical person",
          "B": "Share your AWS account credentials with your colleague, so he can perform a task for you",
          "C": "Don't use the root user account",
          "D": "Do not enable MFA for easier access",
          "E": "",
          "Answer": "C",
          "Explanation": "Use the root account only to create your first IAM User and a few account/service management tasks. For everyday tasks, use IAM User."
        },
        {
          "Q_No": "5",
          "Question": "What are IAM Policies?",
          "A": "A set of policies defines how AWS accounts interact with each other",
          "B": "JSON documents that define a set of permissions for making requests to AWS services, and can be used by IAM Users, User Groups, and IAM Roles",
          "C": "A set of policies that define a password for IAM Users",
          "D": "A set of policies defined by AWS that show how customers interact with AWS",
          "E": "",
          "Answer": "B",
          "Explanation": "JSON documents that define a set of permissions for making requests to AWS services and can be used by IAM Users, Groups, and Roles."
        },
        {
          "Q_No": "6",
          "Question": "Which principle should you apply regarding IAM Permissions?",
          "A": "Grant least privilege",
          "B": "Grant most privilege",
          "C": "Grant more permissions if your employee asks you to",
          "D": "Restrict root account permissions",
          "E": "",
          "Answer": "A",
          "Explanation": "Don't give more permissions than the user needs."
        },
        {
          "Q_No": "7",
          "Question": "What should you do to increase your root account security?",
          "A": "Remove permissions from the root account",
          "B": "Only access AWS services through AWS Command Line Interface (CLI)",
          "C": "Enable Multi-Factor Authentication (MFA)",
          "D": "Don't create IAM Users, only access your AWS account using the root account",
          "E": "",
          "Answer": "C",
          "Explanation": "When you enable MFA, this adds another security layer. Even if your password is stolen or lost, your account is not compromised."
        },
        {
          "Q_No": "8",
          "Question": "IAM User Groups can contain IAM Users and other User Groups.",
          "A": "True",
          "B": "False",
          "C": "",
          "D": "",
          "E": "",
          "Answer": "B",
          "Explanation": "IAM User Groups can contain only IAM Users."
        },
        {
          "Q_No": "9",
          "Question": "An IAM policy consists of one or more statements. A statement in an IAM Policy consists of the following, EXCEPT:",
          "A": "Effect",
          "B": "Principal",
          "C": "Version",
          "D": "Action",
          "E": "Resource",
          "Answer": "C",
          "Explanation": "A statement in an IAM Policy consists of Sid, Effect, Principal, Action, Resource, and Condition. “Version” is part of the policy itself, not the statement."
        },
        {
          "Q_No": "10",
          "Question": "According to the AWS Shared Responsibility Model, which of the following is AWS responsibility?",
          "A": "Rotate Access Key for IAM Users",
          "B": "Enable MFA for the root account and all IAM Users",
          "C": "IAM Users, User Groups, and IAM Policies",
          "D": "AWS Infrastructure",
          "E": "",
          "Answer": "D",
          "Explanation": "AWS is responsible for protecting the infrastructure that runs all of the services offered in the AWS Cloud. This includes the hardware, software, networking, and facilities that support AWS Cloud services. Customers are responsible for managing their own data, applications, and configurations within AWS"
        }
      ];

      let currentIndex = 0;
      let wrongCount = 0;
      let answeredQuestions = new Array(questions.length).fill(false);

      const $questionPage = $('#question-page');
      const $prevBtn = $('#prev-btn');
      const $nextBtn = $('#next-btn');
      const $scoreboard = $('#scoreboard');

      function escapeHtml(text) {
        return $('<div>').text(text).html();
      }

      function renderQuestion(index) {
        let q = questions[index];
        if (!q) {
          $questionPage.html('<p>No question found.</p>');
          return;
        }

        // Hide scoreboard if showing
        $scoreboard.hide().html('');
        $questionPage.show();

        const optionsKeys = ['A', 'B', 'C', 'D', 'E'];
        let optionsHtml = '<ul class="options">';
        optionsKeys.forEach(key => {
          if (q[key] && q[key].trim() !== '') {
            optionsHtml += `<li data-option="${key}"><strong>${key}.</strong> ${escapeHtml(q[key])} <span class="icon"></span></li>`;
          }
        });
        optionsHtml += '</ul>';

        $questionPage.html(`
          <h2>Question ${q.Q_No}</h2>
          <p>${escapeHtml(q.Question)}</p>
          ${optionsHtml}
          <div id="explanation" class="explanation" style="display:none;"></div>
        `);

        const $options = $questionPage.find('.options li');
        $options.removeClass('correct incorrect disabled')
                .css('pointer-events', 'auto')
                .find('.icon').text('').removeClass('correct incorrect');

        // Next button disabled until answer selected
        $nextBtn.prop('disabled', true);

        // Previous button show/hide and enable/disable
        if (index === 0) {
          $prevBtn.hide();
        } else {
          $prevBtn.show().prop('disabled', false);
        }

        // Next button text changes on last question
        if (index === questions.length - 1) {
          $nextBtn.text('Show Results');
        } else {
          $nextBtn.text('Next Question');
        }

        if (answeredQuestions[index]) {
          // Disable options and show answer + explanation, enable next
          showAnswerHighlight(q);
          $nextBtn.prop('disabled', false);
        } else {
          // Attach click handler for options
          $options.off('click').on('click', function() {
            handleAnswerSelection($(this), q);
          });
        }
      }

      function handleAnswerSelection($selectedLi, question) {
        let selectedOption = $selectedLi.data('option');

        if (answeredQuestions[currentIndex]) return;

        const $options = $questionPage.find('.options li');

        // Disable all options after selection
        $options.addClass('disabled').css('pointer-events', 'none');

        answeredQuestions[currentIndex] = true;

        const $explanation = $('#explanation');
        $explanation.show();

        if (selectedOption === question.Answer) {
          $selectedLi.addClass('correct');
          $selectedLi.find('.icon').text('✓').addClass('correct');
          $explanation.html('<strong>Correct!</strong> ' + escapeHtml(question.Explanation));
        } else {
          $selectedLi.addClass('incorrect');
          $selectedLi.find('.icon').text('✗').addClass('incorrect');

          // Highlight correct answer
          $options.each(function() {
            if ($(this).data('option') === question.Answer) {
              $(this).addClass('correct');
              $(this).find('.icon').text('✓').addClass('correct');
            }
          });

          $explanation.html('<strong>Incorrect.</strong> ' + escapeHtml(question.Explanation));
          wrongCount++;
        }

        // Enable Next button after answer selection
        $nextBtn.prop('disabled', false);
      }

      function showAnswerHighlight(question) {
        const $options = $questionPage.find('.options li');
        const $explanation = $('#explanation');
        $explanation.show();
        $explanation.html('<strong>Explanation:</strong> ' + escapeHtml(question.Explanation));

        $options.addClass('disabled').css('pointer-events', 'none');

        $options.each(function() {
          if ($(this).data('option') === question.Answer) {
            $(this).addClass('correct');
            $(this).find('.icon').text('✓').addClass('correct');
          }
        });
      }

      $prevBtn.click(function() {
        if (currentIndex > 0) {
          currentIndex--;
          renderQuestion(currentIndex);
        }
      });

      $nextBtn.click(function() {
        if (currentIndex < questions.length - 1) {
          currentIndex++;
          renderQuestion(currentIndex);
        } else {
          showFinalScore();
        }
      });

      function showFinalScore() {
        $questionPage.hide();
        $prevBtn.hide();
        $nextBtn.hide();

        const totalQuestions = questions.length;
        const correctCount = totalQuestions - wrongCount;

        $scoreboard.html(`
          <p>Your Score: <strong>${correctCount} / ${totalQuestions}</strong></p>
          <p>Wrong Answers: <strong>${wrongCount}</strong></p>
          <button id="restart-btn">Restart Quiz</button>
        `).show();

        $('#restart-btn').click(function() {
          currentIndex = 0;
          wrongCount = 0;
          answeredQuestions.fill(false);
          $prevBtn.show().prop('disabled', true);
          $nextBtn.show().prop('disabled', true);
          $scoreboard.hide();
          renderQuestion(currentIndex);
        });
      }

      // Initial render
      renderQuestion(currentIndex);
    });
  </script>

</body>
</html>
